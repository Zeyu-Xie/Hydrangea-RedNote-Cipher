<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hydrangea RedNote Cipher</title>
    <link rel="stylesheet" href="https://zeyu-xie.github.io/Myosotis-Web/Scholar_Lite/index.css">
    <link rel="icon" href="https://zeyu-xie.github.io/Myosotis-Web/Scholar_Lite/favicon.ico">

    <style>
        textarea {
            width: 100%;
            min-height: 20vh;
            padding: 0.6rem 1rem;
        }

        th,
        td {
            padding: 0.3rem 0.5rem;
        }

        .escape-sequence {
            font-family: 'Courier New', Courier, monospace;
        }
    </style>

    <!-- Google Tag Manager -->
    <!-- <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-N6TRPH8Z');</script> -->
    <!-- End Google Tag Manager -->

</head>

<body>

    <!-- Google Tag Manager (noscript) -->
    <!-- <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N6TRPH8Z" height="0" width="0"
            style="display:none;visibility:hidden"></iframe></noscript> -->
    <!-- End Google Tag Manager (noscript) -->

    <header>
        <h1 style="display: none;">Hydrangea RedNote Cipher</h1>
        <nav>
            <a href="#">Hydrangea RedNote Cipher</a>
        </nav>
    </header>
    <div id="container">
        <h2>Input Area</h2>
        <textarea name="" id="input" placeholder="Input your string here."></textarea>
        <h2>Output Area</h2>
        <textarea name="" id="output" placeholder="The escaped string will be displayed here."
            style="font-family: 'Courier New', Courier, monospace;"></textarea>
        <h2>Hints</h2>
        <ol>
            <li>
                <p><b>这个工具做什么的？</b></p>
                <p>小红书吞私信太厉害，把需要发送的私信内容编码为 Base64 后再进行一次自定义的字符替换，以防止小红书吞私信。</p>
            </li>
            <li>
                <p><b>如何使用这个工具？</b></p>
                <p>在上面输入框中输入需要发送的私信内容，下面输出框中会显示编码后的私信内容。反之，如果你收到了这样的私信，将其复制到下面输出框中，上面输入框中会显示原始的私信内容。</p>
            </li>
        </ol>
    </div>
    <footer>
        <p>
            ©️ <time class="current_year">[Current Year]</time> <a href="https://zeyu-xie.github.io"
                class="author">[Author]</a>. All rights reserved.
        </p>
        <nav>
            <a href="mailto:xie.zeyu20@gmail.com">Email</a> |
            <a href="https://github.com/zeyu-xie">GitHub</a>
        </nav>
    </footer>
    <script src="https://zeyu-xie.github.io/Myosotis-Web/Scholar_Lite/index.js"></script>
    <script>

        let base64chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
        let hashedchars = "赵钱孙李周吴郑王冯陈褚卫蒋沈韩杨朱秦尤许何吕施张孔曹严华金魏陶姜戚谢邹喻柏水窦章云苏潘葛奚范彭郎鲁韦昌马苗凤花方俞任袁柳酆鲍史唐费";
        let hash_a = new Map();
        let hash_b = new Map();
        for (let i = 0; i < base64chars.length; i++) {
            hash_a.set(base64chars[i], hashedchars[i]);
            hash_b.set(hashedchars[i], base64chars[i]);
        }

        const input = document.getElementById("input")
        const output = document.getElementById("output")
        input.addEventListener("change", () => {
            const uint8Array = new TextEncoder().encode(input.value);
            output.value = btoa(btoa(String.fromCharCode(...uint8Array))).split("").map(char => hash_a.get(char)).join("");
        })
        output.addEventListener("change", () => {
            const uint8Array = atob(atob(output.value.split("").map(char => hash_b.get(char)).join(""))).split("").map(char => char.charCodeAt(0));
            input.value = new TextDecoder().decode(new Uint8Array(uint8Array));
        })
    </script>

    <!-- Google tag (gtag.js) -->
    <!-- <script async src="https://www.googletagmanager.com/gtag/js?id=G-7LFF8GVT4L"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-7LFF8GVT4L');
    </script> -->

</body>

</html>